{"ast":null,"code":"import _asyncToGenerator from\"/Users/nazarkashif/CollegeCourses/Sem-8/SPE/ReadFeedCatalogue/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nazarkashif/CollegeCourses/Sem-8/SPE/ReadFeedCatalogue/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nazarkashif/CollegeCourses/Sem-8/SPE/ReadFeedCatalogue/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{Helmet}from'react-helmet';import axios from'axios';import Card from'../components/Card';import Pagination from'../components/Pagination';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Listings=function Listings(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listings=_useState2[0],setListings=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),previous=_useState6[0],setPrevious=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),next=_useState8[0],setNext=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),active=_useState10[0],setActive=_useState10[1];useEffect(function(){window.scrollTo(0,0);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://127.0.0.1:8000/api/book_listings/?page=1\");case 3:res=_context.sent;setListings(res.data.results);setCount(res.data.count);setPrevious(res.data.previous);setNext(res.data.next);_context.next=12;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var displayListings=function displayListings(){var display=[];var result=[];listings.map(function(listing){return display.push(/*#__PURE__*/_jsx(Card,{title:listing.title,category:listing.category,image:listing.image,slug:listing.slug}));});for(var i=0;i<listings.length;i+=3){result.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1-of-3\",children:display[i]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1-of-3\",children:display[i+1]?display[i+1]:null}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1-of-3\",children:display[i+2]?display[i+2]:null})]},i));}return result;};var visitPage=function visitPage(page){axios.get(\"http://127.0.0.1:8000/api/book_listings/?page=\".concat(page)).then(function(res){setListings(res.data.results);setPrevious(res.data.previous);setNext(res.data.next);setActive(page);}).catch(function(err){});};var previous_number=function previous_number(){axios.get(previous).then(function(res){setListings(res.data.results);setPrevious(res.data.previous);setNext(res.data.next);if(previous)setActive(active-1);}).catch(function(err){});};var next_number=function next_number(){axios.get(next).then(function(res){setListings(res.data.results);setPrevious(res.data.previous);setNext(res.data.next);if(next)setActive(active+1);}).catch(function(err){});};return/*#__PURE__*/_jsxs(\"main\",{className:\"listings\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Book Listings\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Listings page\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"listings__listings\",children:displayListings()}),/*#__PURE__*/_jsx(\"section\",{className:\"listings__pagination\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(Pagination,{itemsPerPage:3,count:count,visitPage:visitPage,previous:previous_number,next:next_number,active:active,setActive:setActive})})})]});};export default Listings;","map":{"version":3,"sources":["/Users/nazarkashif/CollegeCourses/Sem-8/SPE/ReadFeedCatalogue/frontend/src/containers/Listings.js"],"names":["React","useState","useEffect","Helmet","axios","Card","Pagination","Listings","listings","setListings","count","setCount","previous","setPrevious","next","setNext","active","setActive","window","scrollTo","fetchData","get","res","data","results","displayListings","display","result","map","listing","push","title","category","image","slug","i","length","visitPage","page","then","catch","err","previous_number","next_number"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Helmet } from 'react-helmet';\nimport axios from 'axios';\nimport Card from '../components/Card';\nimport Pagination from '../components/Pagination';\n\nconst Listings = () => {\n    const [listings, setListings] = useState([]);\n    const [count, setCount] = useState(0);\n    const [previous, setPrevious] = useState('');\n    const [next, setNext] = useState('');\n    const [active, setActive] = useState(1);\n\n    useEffect(() => {\n        window.scrollTo(0, 0);\n\n        const fetchData = async () => {\n            try {\n                const res = await axios.get(`http://127.0.0.1:8000/api/book_listings/?page=1`);\n\n                setListings(res.data.results);\n                setCount(res.data.count);\n                setPrevious(res.data.previous);\n                setNext(res.data.next);\n            }\n            catch (err) {\n\n            }\n        }\n\n        fetchData();\n    }, []);\n\n    const displayListings = () => {\n        let display = [];\n        let result = [];\n\n        listings.map(listing => {\n            return display.push(\n                <Card\n                    title={listing.title}\n                    category={listing.category}\n                    image={listing.image}\n                    slug={listing.slug}\n                />\n            );\n        });\n\n        for (let i = 0; i < listings.length; i += 3) {\n            result.push(\n                <div key={i} className='row'>\n                    <div className='col-1-of-3'>\n                        {display[i]}\n                    </div>\n                    <div className='col-1-of-3'>\n                        {display[i+1] ? display[i+1] : null}\n                    </div>\n                    <div className='col-1-of-3'>\n                        {display[i+2] ? display[i+2] : null}\n                    </div>\n                </div>\n            );\n        }\n\n        return result;\n    };\n\n    const visitPage = (page) => {\n        axios.get(`http://127.0.0.1:8000/api/book_listings/?page=${page}`)\n        .then(res => {\n            setListings(res.data.results);\n            setPrevious(res.data.previous);\n            setNext(res.data.next);\n            setActive(page);\n        })\n        .catch(err => {\n\n        });\n    };\n\n    const previous_number = () => {\n        axios.get(previous)\n        .then(res => {\n            setListings(res.data.results);\n            setPrevious(res.data.previous);\n            setNext(res.data.next);\n            if (previous)\n                setActive(active-1);\n        })\n        .catch(err => {\n\n        });\n    };\n\n    const next_number = () => {\n        axios.get(next)\n        .then(res => {\n            setListings(res.data.results);\n            setPrevious(res.data.previous);\n            setNext(res.data.next);\n            if (next)\n                setActive(active+1);\n        })\n        .catch(err => {\n\n        });\n    };\n\n    return (\n        <main className='listings'>\n            <Helmet>\n                <title>Book Listings</title>\n                <meta\n                    name='description'\n                    content='Listings page'\n                />\n            </Helmet>\n            <section className='listings__listings'>\n                {displayListings()}\n            </section>\n            <section className='listings__pagination'>\n                <div className='row'>\n                    <Pagination\n                        itemsPerPage={3}\n                        count={count}\n                        visitPage={visitPage}\n                        previous={previous_number}\n                        next={next_number}\n                        active={active}\n                        setActive={setActive}\n                    />\n                </div>\n            </section>\n        </main>\n    );\n};\n\nexport default Listings;\n\n"]},"metadata":{},"sourceType":"module"}